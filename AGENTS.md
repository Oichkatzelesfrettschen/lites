All modifications must use modern idiomatic formatting and ensure code is well commented for Doxygen.
Any modified functions should include Doxygen-style block comments documenting purpose, parameters and return values.
Modifications must decompose complex logic into clear, flat structures where reasonable and adopt modern idioms.
